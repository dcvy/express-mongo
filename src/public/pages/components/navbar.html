<nav class="bg-slate-800 text-white shadow-lg px-6 py-4 mb-6">
    <div class="max-w-5xl mx-auto flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <span class="text-2xl font-bold tracking-tight text-blue-400">BE Panel</span>
        </div>
        <div class="flex items-center gap-6">
            <div class="text-right">
                <p class="text-[10px] text-slate-400 uppercase leading-none">Ng∆∞·ªùi d√πng</p>
                <p id="navUsername" class="font-semibold text-blue-300 leading-tight">ƒêang t·∫£i...</p>
            </div>
            <button onclick="window.handleLogout()" class="bg-slate-700 hover:bg-red-600 px-4 py-2 rounded-lg text-sm transition-all shadow-md">
                ƒêƒÉng xu·∫•t
            </button>
        </div>
    </div>
</nav>

<script>
    (function() {
        const token = localStorage.getItem('jwt-token');
        console.log("üöÄ ~ token:", token)

        // 1. Ki·ªÉm tra Token ngay l·∫≠p t·ª©c
        if (!token) {
            window.location.href = '/be/login';
            return;
        }

        // 2. H√†m Decode JWT n·ªôi b·ªô
        function parseJwt(token) {
            try {
                const base64Url = token.split('.')[1];
                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                return JSON.parse(window.atob(base64));
            } catch (e) {
                return null;
            }
        }

        // 3. Hi·ªÉn th·ªã th√¥ng tin
        const userData = parseJwt(token);
        console.log("üöÄ ~ userData.name:", userData.name)
        if (userData && userData.name) {
            document.getElementById('navUsername').innerText = userData.name;
        } else {
            // Token h·ªèng ho·∫∑c h·∫øt h·∫°n
            localStorage.removeItem('jwt-token');
            window.location.href = '/be/login';
        }

        // 4. ƒê∆∞a h√†m logout ra ph·∫°m vi to√†n c·ª•c ƒë·ªÉ n√∫t button g·ªçi ƒë∆∞·ª£c
        window.handleLogout = function() {
            localStorage.removeItem('jwt-token');
            window.location.href = '/be/login';
        };
    })();
</script>